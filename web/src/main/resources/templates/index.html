<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>Geekoosh Video Converter</title>
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width"/>

    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,600,800' rel='stylesheet' type='text/css'/>

    <script>
        function uploadFile() {
            var form = document.getElementById('file-form');
            var fileSelect = document.getElementById('file');
            var uploadButton = document.getElementById('upload-button');

            form.onsubmit = function(event) {
                event.preventDefault();
                var files = fileSelect.files;
                var formData = new FormData();
                formData.append('file', files[0], files[0].name);

                var xhr = new XMLHttpRequest();
                xhr.open('POST', '/', true);

                xhr.onload = function () {
                  if (xhr.status === 200) {
                    // File(s) uploaded.
                    uploadButton.innerHTML = 'Upload';
                  } else {
                    alert('An error occurred!');
                  }
                };

                xhr.send(formData);
            }
        }
    </script>
</head>
<body onload="uploadFile()">
<div class="page-header"></div>
<div class="container">
    <form id="file-form" method="post" action="/" enctype="multipart/form-data">
        <input id="file" name="file" type="file"/>
        <input id="upload-button" type="submit" value="Upload"/>
    </form>
</div>
</body>
</html>